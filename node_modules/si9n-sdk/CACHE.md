# Si9n SDK Cache

The Si9n SDK includes a cache object that allows you to easily cache external feeds and media so that your content will still work offline.  Behind the scenes it uses the browser's Cache API (<https://developer.mozilla.org/en-US/docs/Web/API/Cache>) to persist data to disk.

```javascript
    import si9n from 'si9n-sdk'

    // download and cache file(s). Use this for images + videos that can be fetched once and cached permanently.
    // urls can be an array of url strings or Request objects (https://developer.mozilla.org/en-US/docs/Web/API/Request/Request)
    si9n.cache.url(urls, optionalCacheName).then(urls => {
        // array of blob urls pointing to the downloaded file for use in a src attribute of an image or video
        console.log(urls)
    })

    // get and cache a url. Will return the cached version if network fails, i.e. useful for feeds that update regularly.
    // can be a Request object (https://developer.mozilla.org/en-US/docs/Web/API/Request/Request)
    si9n.cache.get(url, optionalCacheName, optionalTimeoutInMs).then(res => {
        // res will be an object literal if JSON returned
        console.log(res)
    })

    // put arbitrary data into the cache. You can then retrieve using the .has() method
    si9n.cache.put(key, data, optionalCacheName)

    // checks if an entry is available in the cache and returns it
    si9n.cache.has(url, optionalCacheName).then(res => {
        // returns the item if it's found, but doesn't go to the network if it isn't
        console.log(res)
    })

    // get a list of keys of items in the cache
    si9n.cache.keys(optionalCacheName).then(keys => console.log(keys))

    // remove item(s) from the cache and revoke any blob urls
    si9n.cache.remove(urls, optionalCacheName)

    // clear the cache and blob urls
    si9n.cache.clear(optionalCacheNames)

    // clear up blob urls
    si9n.cache.clean(optionalUrls)

    // helper to get the local storage quota details
    si9n.cache.quota().then(({usage, quota}) => {
    })

    // clear the cache if there is less than x bytes left
    si9n.cache.clearIfQuotaLessThan(1024 * 1024 * 2, optionalCacheNames).then(ok => {
        // ok = true or false
    })
```

!> Avoid opaque responses by making sure the URLs you call have the appropriate CORs headers (details here: <https://cloudfour.com/thinks/when-7-kb-equals-7-mb>).  This is especially true on ChromeOS where the amount of local storage available is severally limited.
