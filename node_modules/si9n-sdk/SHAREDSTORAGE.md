# Si9n SDK Shared Storage

This part of the SDK builds on the cache SDK to provide a shared storage facility that can be used to share data between multiple content items that might be playing concurrently and trigger updates when anything changes.

```javascript
    import si9n from 'si9n-sdk'

    // fetch data from storage
    si9n.shared.get(key).then(data => console.log(data))

    // put data into storage
    si9n.shared.set(key, data)

    // remove data from storage
    si9n.shared.remove(key)

    // watch a key for changes, triggers a get initially
    const watcher = si9n.shared.watch(key, data => console.log(data))

    // stop watching
    watcher.stop()

    // get a lock so work is only carried out by one concurrent content item
    si9n.shared.lock(key).then(lock => {
        console.log('lock', lock) // true if lock obtained, false if someone else has it
    })


    // example of sharing some json data...
    si9n.shared.watch('my-data', data => {
        // renders initially with the last data fetched and then whenever the data is set
        console.log(data)
    })

    // only one content item will fetch json data from a url, all content will receive the results when set
    si9n.shared.lock('my-lock').then(lock => {
        if (!lock) return // another content item has the lock

        // this will only run once, regardless of how many instances of the item are active
        fetch('https://my/data.json').then(res => res.json()).then(data => {
            si9n.shared.set('my-data', data) // will trigger the watcher across all active content
        })    
    })    

```
