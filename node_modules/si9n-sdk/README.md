# Si9n SDK

Can be installed using npm:

```bash
    npm install https://player.si9n.io/npm/si9n-sdk-1.0.0.tgz
```

If you are not using a build process you can copy the minified js bundle from ./dist into your project:

```html
    <script src="si9n-sdk.min.js"></script>
    <script>
        // is available as a global object window.si9n
        si9n.on('ready', () => {})
    </script>
```

If you are using an ES6 compatible build process such as webpack and babel you can use the following:

```javascript
    import si9n from 'si9n-sdk'

    // EVENTS
    si9n.on('ready', () => {
        // si9n has loaded (or not if outside si9n player)

        // or there is a promised based version:
        // await si9n.ready()
    })

    si9n.on('configured', () => {
        // called everytime the si9n conf has changed
    })

    si9n.on('data', event => {
        // template field data has been received
        // event.data = [{key: 'fieldName', type: 'text', value: 'value'}]
    })

    si9n.on('notloaded', () => {
        // content was loaded outside of the si9n player
    })

    // life cycle events
    si9n.on('play', () => {})    // this content has been told to play
    si9n.on('pause', () => {})   // the content has been paused
    si9n.on('stop', () => {})    // stopping, before transition has happened
    si9n.on('stopped', () => {}) // stopped, after transition
    si9n.on('up-next', () => {}) // in a playlist and this item will be played next

    // generic messaging
    si9n.on('message', (event) => {
        // event = {type, data}
    })


    // PROPERTIES
    si9n.initiated // timestamp of when the html was first loaded
    si9n.loaded    // timestamp of when the si9n conf was first received
    si9n.notloaded // timestamp when loaded outside of the si9n player
    si9n.offline   // false if online, or millseconds we've been offline for
    si9n.now       // is previewing a different point in time (local yyyy-mm-dd hh:mm:ss)
    si9n.time      // milliseconds since we loaded
    si9n.elapsed   // milliseconds of actual playing time elapsed

    si9n.started   // timestamp of when the content started playing
    si9n.playing   // is currently playing
    si9n.paused    // is paused
    si9n.stopped   // has stopped

    // si9n conf objects about the org, device, the place where it is and the current content item
    si9n.org
    si9n.place
    si9n.device
    si9n.display
    si9n.content

    // si9n environment details
    si9n.env.previewPlayer   // is running in the preview player (not a real device)
    si9n.env.contentPreview  // is previewing the content (not a device preview)
    si9n.env.messageEditing  // is the message editing screen of the ui
    si9n.env.preview         // is mobile or small preview.  use lo-res versions of media if possible
    si9n.env.thumbnail       // is generating a thumbnail


    // METHODS
    si9n.end()   // tell si9n to stop this item
    si9n.next()  // tell si9n to go to the next item in a playlist
    si9n.prev()  // tell si9n to go to the previous item in a playlist
    si9n.reset() // in kiosk mode tell si9n to clear the session and reload
    si9n.keepAlive(true || false) // keep this content running even when it's not playing
    si9n.skip(true || false)      // if in a playlist, skip this content

    // messaging
    si9n.message(message) // send a generic message
    si9n.interrupt({id: '', index: 0, on: true, message: {}})        // trigger an interrupt
    si9n.interrupt({id: 'audio-or-video', on: true, playFrom: 3000}) // trigger a video to play from part way in
    si9n.displayMessage(message)  // send a message to the attached display, returns a promise that resolves with a response if received
    si9n.serial({port, data: []}) // send raw serial messages
    si9n.log(level, data)         // custom content logging, if enabled

    // printing
    si9n.printers()     // request a list of printers (will be received as a generic message)
    si9n.print(printer) // request to print the current page

```
