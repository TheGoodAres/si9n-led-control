# Si9n SDK Templates

The Si9n SDK includes a template helper that provides a simpler abstraction over the main sdk for creating message templates.
Including this library in your HTML will automatically populate elements with template variable content without you
having to write any javascript.

If you are not using a js build tool you include the minified js bundle and add a special css class to the html tag to
initialize it as follows.

```html
    <html class="si9n-template">
      <body>
        <script src="si9n-sdk.min.js"></script>
      </body>
    </html>
```

For ES6 usage, you can import as follows.

```javascript
    import {useTemplate} from 'si9n-sdk'

    const template = useTemplate() // initialize the template
```

You can then markup your HTML template with the follow attributes so that it knows where to insert the template field content.

```html
    <div data-field="fieldKey">text, image or videos</div>
    <div data-image="fieldKey">will set the css background image to the content item</div>
    <div data-paragraphs="fieldKey">text will be split into paragraphs</div>
    <div data-cssvar="fieldKey">will set a css variable on the element (e.g. --key: value)</div>
```

How the content is inserted depends on the type of field:
* `text`, `textarea`, `int`, `float`, `decimal` and `select` fields will be inserted into the element as text content.
* `content` will have an image or video tag inserted into the element.  Can also specify `data-default` attribute as a path to a default image/video.
* `bool` will toggle a css class of the field key.

To override the default behaviour you can add event listeners for specific fields.  This can be used if you need to process
the data before it's inserted into the page or you have more complex logic you wish to implement.

```javascript
    import {useTemplate} from 'si9n-sdk'

    const template = useTemplate() // or si9n.useTemplate() if using minified bundle

    template.on('field-[FIELD KEY]', (field, el, si9n) => {
        el.textContent = (field.value || '').toUpperCase()
    })
```

CSS classes will also be added to the `html` element for `loaded`, `play`, `stop`.
These can be used to trigger css animations and transitions when the content starts and stops.

## Drag & Drop Layouts

The position and size of elements in your templates can be made editable by adding the following.  In your `si9n.json`
file add a field to store the layout data:

```json
    {
        "key": "myLayout",
        "type": "json",
        "hidden": true
    }
```

Then in your template html you can mark an element as editable by adding the following attribute:

```html
    <div data-layout="myLayout"></div>
```

When editing this message in the si9n ui you will be able to drag the element to set it's position and also drag from
the bottom right corner to resize it.

## Testing

To make templates easier to test whilst building them, this library can also simulate how the content will be run within
the si9n player.  To enable this you need to append a querystring of `?test` onto your url.
This will then look for a file called `test.json` containing a json object of key value pairs
of the template data to insert.

!> **Pro-Tip:** Use a local server like `live-server` (https://www.npmjs.com/package/live-server) to create
a simple development environment with live reloading.
